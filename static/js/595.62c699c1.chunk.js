"use strict";(self.webpackChunkflighttools=self.webpackChunkflighttools||[]).push([[595],{572:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var l=s(43),r=s(368),n=s(228),a=s.n(n),c=(s(433),s(809)),d=s(579);delete a().Icon.Default.prototype._getIconUrl,a().Icon.Default.mergeOptions({iconRetinaUrl:s(249),iconUrl:s(24),shadowUrl:s(71)});const i=()=>{var e,t,s,n,i,o,u,x;const{isDarkMode:m}=(0,r.D)(),g=(0,l.useRef)(null),h=(0,l.useRef)(null),p=(0,l.useRef)(null),[f,v]=(0,l.useState)({latitude:null,longitude:null,altitude:null,speed:null,heading:null,lastUpdate:new Date,gpsAccuracy:null}),[b,y]=(0,l.useState)(null),N=(0,l.useRef)(null),j=(0,l.useRef)(null);return(0,l.useEffect)((()=>(g.current||(g.current=a().map("map").setView([0,0],2),a().tileLayer(m?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xa9 OpenStreetMap contributors"}).addTo(g.current)),()=>{g.current&&(g.current.remove(),g.current=null)})),[m]),(0,l.useEffect)((()=>{(async()=>{try{return N.current=navigator.geolocation.watchPosition((e=>{j.current=e;const t={latitude:e.coords.latitude,longitude:e.coords.longitude,altitude:e.coords.altitude,speed:e.coords.speed,heading:e.coords.heading,lastUpdate:new Date,gpsAccuracy:e.coords.accuracy};if(v(t),g.current&&t.latitude&&t.longitude){const e=a().latLng(t.latitude,t.longitude);h.current?(h.current.setLatLng(e),h.current.setIcon(a().divIcon({html:`<div style="transform: rotate(${t.heading||0}deg)">\n                    <img src="${c.A}" alt="plane" style="width: 24px; height: 24px;" />\n                  </div>`,className:"",iconSize:[24,24],iconAnchor:[12,12]}))):h.current=a().marker(e,{icon:a().divIcon({html:`<div style="transform: rotate(${t.heading||0}deg)">\n                      <img src="${c.A}" alt="plane" style="width: 24px; height: 24px;" />\n                    </div>`,className:"",iconSize:[24,24],iconAnchor:[12,12]})}).addTo(g.current),p.current?(p.current.setLatLng(e),p.current.setRadius(t.gpsAccuracy||0)):t.gpsAccuracy&&(p.current=a().circle(e,{radius:t.gpsAccuracy,color:"blue",fillColor:"#30f",fillOpacity:.15}).addTo(g.current)),g.current.setView(e,g.current.getZoom())}}),(e=>{if(console.warn("GPS Error:",e),j.current){const e={latitude:j.current.coords.latitude,longitude:j.current.coords.longitude,altitude:j.current.coords.altitude,speed:j.current.coords.speed,heading:j.current.coords.heading,lastUpdate:new Date,gpsAccuracy:j.current.coords.accuracy};if(v(e),g.current&&e.latitude&&e.longitude){const t=a().latLng(e.latitude,e.longitude);h.current&&(h.current.setLatLng(t),h.current.setIcon(a().divIcon({html:`<div style="transform: rotate(${e.heading||0}deg)">\n                      <img src="${c.A}" alt="plane" style="width: 24px; height: 24px;" />\n                    </div>`,className:"",iconSize:[24,24],iconAnchor:[12,12]}))),p.current&&(p.current.setLatLng(t),p.current.setRadius(e.gpsAccuracy||0))}}}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}),()=>{null!==N.current&&navigator.geolocation.clearWatch(N.current)}}catch(e){y(e instanceof Error?e.message:"Failed to start tracking")}})()}),[]),(0,d.jsx)("div",{className:(m?"bg-gray-900":"bg-gray-100")+" p-2 sm:p-4",children:(0,d.jsx)("div",{className:(m?"bg-gray-800":"bg-white")+" rounded-lg shadow p-3 sm:p-6 max-w-full mx-auto h-[calc(100vh-2rem)]",children:(0,d.jsxs)("div",{className:"flex flex-col h-full",children:[(0,d.jsx)("div",{className:"flex-none mb-2 sm:mb-4",children:(0,d.jsx)("h2",{className:"text-xl sm:text-2xl font-bold "+(m?"text-white":"text-gray-800"),children:"In-Flight Tracker"})}),b&&(0,d.jsx)("div",{className:"flex-none p-2 sm:p-3 rounded mb-2 sm:mb-4 text-sm sm:text-base "+(m?"bg-red-900 text-red-100":"bg-red-100 text-red-700"),children:b}),(0,d.jsxs)("div",{className:"flex-1 flex flex-col lg:flex-row gap-3 sm:gap-4 min-h-0",children:[(0,d.jsx)("div",{className:"lg:flex-grow rounded-lg overflow-hidden h-[50vh] lg:h-auto",children:(0,d.jsx)("div",{id:"map",className:"w-full h-full"})}),(0,d.jsxs)("div",{className:"lg:w-80 flex flex-col gap-3 sm:gap-4 overflow-y-auto",children:[(0,d.jsx)("div",{className:"p-3 sm:p-4 rounded-lg "+(m?"bg-blue-900 text-blue-100":"bg-blue-100 text-blue-700"),children:(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-xs sm:text-sm font-medium text-center "+(m?"text-blue-200":"text-blue-800"),children:"Altitude"}),(0,d.jsxs)("div",{className:"text-lg sm:text-xl font-bold text-center",children:[f.altitude?(A=f.altitude,Math.round(3.28084*A)):"N/A","ft"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-xs sm:text-sm font-medium text-center "+(m?"text-blue-200":"text-blue-800"),children:"Speed"}),(0,d.jsxs)("div",{className:"text-lg sm:text-xl font-bold text-center",children:[f.speed?(w=3.6*f.speed,Math.round(.539957*w)):"N/A","kts"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-xs sm:text-sm font-medium text-center "+(m?"text-blue-200":"text-blue-800"),children:"Heading"}),(0,d.jsxs)("div",{className:"text-lg sm:text-xl font-bold text-center",children:[null!==(e=null===(t=f.heading)||void 0===t?void 0:t.toFixed(1))&&void 0!==e?e:"N/A","\xb0"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-xs sm:text-sm font-medium text-center "+(m?"text-blue-200":"text-blue-800"),children:"GPS Accuracy"}),(0,d.jsxs)("div",{className:"text-lg sm:text-xl font-bold text-center",children:[null!==(s=null===(n=f.gpsAccuracy)||void 0===n?void 0:n.toFixed(1))&&void 0!==s?s:"N/A","m"]})]})]})}),(0,d.jsxs)("div",{className:"p-3 sm:p-4 rounded-lg "+(m?"bg-gray-700":"bg-gray-100"),children:[(0,d.jsx)("h3",{className:"text-sm sm:text-base lg:text-lg font-semibold mb-2 sm:mb-3 "+(m?"text-white":"text-gray-800"),children:"Position"}),(0,d.jsxs)("div",{className:"space-y-1 sm:space-y-2 text-sm",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{className:m?"text-gray-300":"text-gray-600",children:"Latitude:"}),(0,d.jsxs)("span",{className:"font-mono",children:[null!==(i=null===(o=f.latitude)||void 0===o?void 0:o.toFixed(6))&&void 0!==i?i:"N/A","\xb0"]})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{className:m?"text-gray-300":"text-gray-600",children:"Longitude:"}),(0,d.jsxs)("span",{className:"font-mono",children:[null!==(u=null===(x=f.longitude)||void 0===x?void 0:x.toFixed(6))&&void 0!==u?u:"N/A","\xb0"]})]})]})]}),(0,d.jsxs)("div",{className:"p-3 sm:p-4 rounded-lg "+(m?"bg-gray-700":"bg-gray-100"),children:[(0,d.jsx)("h3",{className:"text-sm sm:text-base lg:text-lg font-semibold mb-2 sm:mb-3 "+(m?"text-white":"text-gray-800"),children:"Last Update"}),(0,d.jsx)("div",{className:"text-center font-mono text-sm sm:text-base "+(m?"text-gray-300":"text-gray-600"),children:f.lastUpdate.toLocaleTimeString()})]})]})]})]})})});var w,A}},809:(e,t,s)=>{s.d(t,{A:()=>l});s(43);const l=s.p+"static/media/plane-icon.5312c99550d9e701054eea554971757c.svg"}}]);
//# sourceMappingURL=595.62c699c1.chunk.js.map