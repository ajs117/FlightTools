"use strict";(self.webpackChunkflighttools=self.webpackChunkflighttools||[]).push([[595],{572:(e,t,l)=>{l.r(t),l.d(t,{default:()=>i});var s=l(43),n=l(368),r=l(228),c=l.n(r),a=(l(433),l(809)),d=l(579);delete c().Icon.Default.prototype._getIconUrl,c().Icon.Default.mergeOptions({iconRetinaUrl:l(249),iconUrl:l(24),shadowUrl:l(71)});const i=()=>{var e,t,l,r,i,o,u,g;const{isDarkMode:x}=(0,n.D)(),m=(0,s.useRef)(null),h=(0,s.useRef)(null),p=(0,s.useRef)(null),[v,f]=(0,s.useState)({latitude:null,longitude:null,altitude:null,speed:null,heading:null,lastUpdate:new Date,gpsAccuracy:null}),[y,b]=(0,s.useState)(null),N=(0,s.useRef)(null),j=(0,s.useRef)(null);return(0,s.useEffect)((()=>(m.current||(m.current=c().map("map").setView([0,0],2),c().tileLayer(x?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xa9 OpenStreetMap contributors"}).addTo(m.current)),()=>{m.current&&(m.current.remove(),m.current=null)})),[x]),(0,s.useEffect)((()=>{(async()=>{try{return N.current=navigator.geolocation.watchPosition((e=>{j.current=e;const t={latitude:e.coords.latitude,longitude:e.coords.longitude,altitude:e.coords.altitude,speed:e.coords.speed,heading:e.coords.heading,lastUpdate:new Date,gpsAccuracy:e.coords.accuracy};if(f(t),m.current&&t.latitude&&t.longitude){const e=c().latLng(t.latitude,t.longitude);h.current?(h.current.setLatLng(e),h.current.setIcon(c().divIcon({html:`<div style="transform: rotate(${t.heading||0}deg)">\n                    <img src="${a.A}" alt="plane" style="width: 24px; height: 24px;" />\n                  </div>`,className:"",iconSize:[24,24],iconAnchor:[12,12]}))):h.current=c().marker(e,{icon:c().divIcon({html:`<div style="transform: rotate(${t.heading||0}deg)">\n                      <img src="${a.A}" alt="plane" style="width: 24px; height: 24px;" />\n                    </div>`,className:"",iconSize:[24,24],iconAnchor:[12,12]})}).addTo(m.current),p.current?(p.current.setLatLng(e),p.current.setRadius(t.gpsAccuracy||0)):t.gpsAccuracy&&(p.current=c().circle(e,{radius:t.gpsAccuracy,color:"blue",fillColor:"#30f",fillOpacity:.15}).addTo(m.current)),m.current.setView(e,m.current.getZoom())}}),(e=>{if(console.warn("GPS Error:",e),j.current){const e={latitude:j.current.coords.latitude,longitude:j.current.coords.longitude,altitude:j.current.coords.altitude,speed:j.current.coords.speed,heading:j.current.coords.heading,lastUpdate:new Date,gpsAccuracy:j.current.coords.accuracy};if(f(e),m.current&&e.latitude&&e.longitude){const t=c().latLng(e.latitude,e.longitude);h.current&&(h.current.setLatLng(t),h.current.setIcon(c().divIcon({html:`<div style="transform: rotate(${e.heading||0}deg)">\n                      <img src="${a.A}" alt="plane" style="width: 24px; height: 24px;" />\n                    </div>`,className:"",iconSize:[24,24],iconAnchor:[12,12]}))),p.current&&(p.current.setLatLng(t),p.current.setRadius(e.gpsAccuracy||0))}}}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}),()=>{null!==N.current&&navigator.geolocation.clearWatch(N.current)}}catch(e){b(e instanceof Error?e.message:"Failed to start tracking")}})()}),[]),(0,d.jsx)("div",{className:`min-h-screen ${x?"bg-gray-900":"bg-gray-100"} p-4`,children:(0,d.jsx)("div",{className:(x?"bg-gray-800":"bg-white")+" rounded-lg shadow p-6 max-w-[1920px] mx-auto h-[calc(100vh-2rem)]",children:(0,d.jsxs)("div",{className:"flex flex-col h-full",children:[(0,d.jsx)("div",{className:"flex-none mb-4",children:(0,d.jsx)("h2",{className:"text-2xl font-bold "+(x?"text-white":"text-gray-800"),children:"In-Flight Tracker"})}),y&&(0,d.jsx)("div",{className:"flex-none p-3 rounded mb-4 "+(x?"bg-red-900 text-red-100":"bg-red-100 text-red-700"),children:y}),(0,d.jsxs)("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-12 gap-4 min-h-0",children:[(0,d.jsx)("div",{className:"lg:col-span-9 rounded-lg overflow-hidden",children:(0,d.jsx)("div",{id:"map",className:"w-full h-full"})}),(0,d.jsxs)("div",{className:"lg:col-span-3 space-y-4 overflow-y-auto",children:[(0,d.jsx)("div",{className:"p-4 rounded-lg "+(x?"bg-blue-900 text-blue-100":"bg-blue-100 text-blue-700"),children:(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium text-center "+(x?"text-blue-200":"text-blue-800"),children:"Altitude"}),(0,d.jsxs)("div",{className:"text-xl font-bold text-center",children:[v.altitude?(w=v.altitude,Math.round(3.28084*w)):"N/A","ft"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium text-center "+(x?"text-blue-200":"text-blue-800"),children:"Speed"}),(0,d.jsxs)("div",{className:"text-xl font-bold text-center",children:[v.speed?(A=3.6*v.speed,Math.round(.539957*A)):"N/A","kts"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium text-center "+(x?"text-blue-200":"text-blue-800"),children:"Heading"}),(0,d.jsxs)("div",{className:"text-xl font-bold text-center",children:[null!==(e=null===(t=v.heading)||void 0===t?void 0:t.toFixed(1))&&void 0!==e?e:"N/A","\xb0"]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium text-center "+(x?"text-blue-200":"text-blue-800"),children:"GPS Accuracy"}),(0,d.jsxs)("div",{className:"text-xl font-bold text-center",children:[null!==(l=null===(r=v.gpsAccuracy)||void 0===r?void 0:r.toFixed(1))&&void 0!==l?l:"N/A","m"]})]})]})}),(0,d.jsxs)("div",{className:"p-4 rounded-lg "+(x?"bg-gray-700":"bg-gray-100"),children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-3 "+(x?"text-white":"text-gray-800"),children:"Position"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{className:x?"text-gray-300":"text-gray-600",children:"Latitude:"}),(0,d.jsxs)("span",{className:"font-mono",children:[null!==(i=null===(o=v.latitude)||void 0===o?void 0:o.toFixed(6))&&void 0!==i?i:"N/A","\xb0"]})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{className:x?"text-gray-300":"text-gray-600",children:"Longitude:"}),(0,d.jsxs)("span",{className:"font-mono",children:[null!==(u=null===(g=v.longitude)||void 0===g?void 0:g.toFixed(6))&&void 0!==u?u:"N/A","\xb0"]})]})]})]}),(0,d.jsxs)("div",{className:"p-4 rounded-lg "+(x?"bg-gray-700":"bg-gray-100"),children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-3 "+(x?"text-white":"text-gray-800"),children:"Last Update"}),(0,d.jsx)("div",{className:"text-center font-mono "+(x?"text-gray-300":"text-gray-600"),children:v.lastUpdate.toLocaleTimeString()})]})]})]})]})})});var A,w}},809:(e,t,l)=>{l.d(t,{A:()=>s});l(43);const s=l.p+"static/media/plane-icon.5312c99550d9e701054eea554971757c.svg"}}]);
//# sourceMappingURL=595.7eabf96a.chunk.js.map