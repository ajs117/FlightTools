"use strict";(self.webpackChunkflighttools=self.webpackChunkflighttools||[]).push([[595],{572:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var n=r(43),a=r(368),c=r(228),l=r.n(c),i=(r(433),r(809)),s=r(579);delete l().Icon.Default.prototype._getIconUrl,l().Icon.Default.mergeOptions({iconRetinaUrl:r(249),iconUrl:r(24),shadowUrl:r(71)});const d=()=>{var e,t;const{isDarkMode:r}=(0,a.D)(),[c,d]=(0,n.useState)({latitude:null,longitude:null,altitude:null,speed:null,heading:null,lastUpdate:new Date,gpsAccuracy:null}),[o,u]=(0,n.useState)(null),[g,h]=(0,n.useState)(!0),p=(0,n.useRef)(null),m=(0,n.useRef)(null),x=(0,n.useRef)(null),v=(0,n.useRef)(null),y=(0,n.useRef)(null);return(0,n.useEffect)((()=>{if(p.current||(p.current=l().map("map").setView([0,0],2),l().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xa9 OpenStreetMap contributors"}).addTo(p.current)),!navigator.geolocation)return h(!1),void u("GPS is not available on this device");return(async()=>{try{v.current=navigator.geolocation.watchPosition((e=>{y.current=e;const t={latitude:e.coords.latitude,longitude:e.coords.longitude,altitude:e.coords.altitude,speed:e.coords.speed,heading:e.coords.heading,lastUpdate:new Date,gpsAccuracy:e.coords.accuracy};if(d(t),u(null),p.current&&t.latitude&&t.longitude){const e=l().latLng(t.latitude,t.longitude);m.current?(m.current.setLatLng(e),m.current.setIcon(l().divIcon({html:`<div style="transform: rotate(${t.heading||0}deg)">\n                    <img src="${i.A}" alt="plane" style="width: 24px; height: 24px;" />\n                  </div>`,className:"",iconSize:[24,24],iconAnchor:[12,12]}))):m.current=l().marker(e,{icon:l().divIcon({html:`<div style="transform: rotate(${t.heading||0}deg)">\n                      <img src="${i.A}" alt="plane" style="width: 24px; height: 24px;" />\n                    </div>`,className:"",iconSize:[24,24],iconAnchor:[12,12]})}).addTo(p.current),x.current?(x.current.setLatLng(e),x.current.setRadius(t.gpsAccuracy||0)):x.current=l().circle(e,{radius:t.gpsAccuracy||0,color:r?"#60a5fa":"#3b82f6",fillColor:r?"#60a5fa":"#3b82f6",fillOpacity:.2,weight:1}).addTo(p.current),p.current.setView(e,p.current.getZoom())}}),(e=>{if(console.warn("GPS Error:",e),u(`GPS Error: ${e.message}`),y.current){const e={latitude:y.current.coords.latitude,longitude:y.current.coords.longitude,altitude:y.current.coords.altitude,speed:y.current.coords.speed,heading:y.current.coords.heading,lastUpdate:new Date,gpsAccuracy:y.current.coords.accuracy};if(d(e),p.current&&e.latitude&&e.longitude){const t=l().latLng(e.latitude,e.longitude);m.current&&(m.current.setLatLng(t),m.current.setIcon(l().divIcon({html:`<div style="transform: rotate(${e.heading||0}deg)">\n                      <img src="${i.A}" alt="plane" style="width: 24px; height: 24px;" />\n                    </div>`,className:"",iconSize:[24,24],iconAnchor:[12,12]}))),x.current&&(x.current.setLatLng(t),x.current.setRadius(e.gpsAccuracy||0))}}}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}catch(e){u("Failed to start GPS tracking"),console.error("GPS Error:",e)}})(),()=>{null!==v.current&&navigator.geolocation.clearWatch(v.current),p.current&&(p.current.remove(),p.current=null)}}),[r]),(0,s.jsxs)("div",{className:"p-4 "+(r?"text-white":"text-gray-800"),children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"In-Flight Tracker"}),!g&&(0,s.jsx)("div",{className:"p-4 rounded-lg mb-4 "+(r?"bg-red-900 text-red-200":"bg-red-100 text-red-800"),children:"GPS is not available on this device. This tool requires GPS functionality to work."}),o&&(0,s.jsx)("div",{className:"p-4 rounded-lg mb-4 "+(r?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800"),children:o}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{className:`p-4 rounded-lg ${r?"bg-gray-800":"bg-white"} shadow`,children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Current Position"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("p",{children:["Latitude: ",(null===(e=c.latitude)||void 0===e?void 0:e.toFixed(6))||"N/A"]}),(0,s.jsxs)("p",{children:["Longitude: ",(null===(t=c.longitude)||void 0===t?void 0:t.toFixed(6))||"N/A"]}),(0,s.jsxs)("p",{children:["Altitude: ",c.altitude?`${Math.round(c.altitude)}m`:"N/A"]}),(0,s.jsxs)("p",{children:["Speed: ",c.speed?`${Math.round(3.6*c.speed)} km/h`:"N/A"]}),(0,s.jsxs)("p",{children:["Heading: ",c.heading?`${Math.round(c.heading)}\xb0`:"N/A"]}),(0,s.jsxs)("p",{children:["GPS Accuracy: ",c.gpsAccuracy?`\xb1${Math.round(c.gpsAccuracy)}m`:"N/A"]}),(0,s.jsxs)("p",{children:["Last Update: ",c.lastUpdate.toLocaleTimeString()]})]})]}),(0,s.jsxs)("div",{className:`p-4 rounded-lg ${r?"bg-gray-800":"bg-white"} shadow`,children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Map View"}),(0,s.jsx)("div",{id:"map",className:"w-full h-64 rounded-lg"})]})]})]})}},809:(e,t,r)=>{r.d(t,{A:()=>n});r(43);const n=r.p+"static/media/plane-icon.5312c99550d9e701054eea554971757c.svg"}}]);
//# sourceMappingURL=595.487766ae.chunk.js.map