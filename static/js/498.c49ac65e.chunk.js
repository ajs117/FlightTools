"use strict";(self.webpackChunkflighttools=self.webpackChunkflighttools||[]).push([[498],{23:(e,n,t)=>{t.d(n,{e:()=>l});var r=t(215),o=t(996),i=t(576);var a=t(228);const l=(0,r.X3)((function(e,n){let{url:t,...r}=e;const l=new a.TileLayer(t,(0,o.P)(r,n));return(0,i.Q)(l,n)}),(function(e,n,t){!function(e,n,t){const{opacity:r,zIndex:o}=n;null!=r&&r!==t.opacity&&e.setOpacity(r),null!=o&&o!==t.zIndex&&e.setZIndex(o)}(e,n,t);const{url:r}=n;null!=r&&r!==t.url&&e.setUrl(r)}))},30:(e,n,t)=>{t.d(n,{R:()=>l});var r=t(215),o=t(576),i=t(772),a=t(228);const l=(0,r.Lt)((function(e,n){let{positions:t,...r}=e;const l=new a.Polyline(t,r);return(0,o.Q)(l,(0,i.W4)(n,{overlayContainer:l}))}),(function(e,n,t){n.positions!==t.positions&&e.setLatLngs(n.positions)}))},36:(e,n,t)=>{t.d(n,{p:()=>l});var r=t(215),o=t(576),i=t(772),a=t(228);const l=(0,r.Nq)((function(e,n){let{position:t,...r}=e;const l=new a.Marker(t,r);return(0,o.Q)(l,(0,i.W4)(n,{overlayContainer:l}))}),(function(e,n,t){n.position!==t.position&&e.setLatLng(n.position),null!=n.icon&&n.icon!==t.icon&&e.setIcon(n.icon),null!=n.zIndexOffset&&n.zIndexOffset!==t.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),null!=n.opacity&&n.opacity!==t.opacity&&e.setOpacity(n.opacity),null!=e.dragging&&n.draggable!==t.draggable&&(!0===n.draggable?e.dragging.enable():e.dragging.disable())}))},215:(e,n,t)=>{t.d(n,{Nq:()=>p,Lt:()=>g,X3:()=>f});var r=t(43),o=(t(950),t(772));function i(e){function n(n,t){const{instance:i,context:a}=e(n).current;(0,r.useImperativeHandle)(t,(()=>i));const{children:l}=n;return null==l?null:r.createElement(o.dk,{value:a},l)}return(0,r.forwardRef)(n)}var a=t(576);function l(e,n){const t=(0,r.useRef)(void 0);(0,r.useEffect)((function(){return null!=n&&e.instance.on(n),t.current=n,function(){null!=t.current&&e.instance.off(t.current),t.current=null}}),[e,n])}var s=t(996);function c(e,n){(0,r.useEffect)((function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){n.layerContainer?.removeLayer(e.instance),n.map.removeLayer(e.instance)}}),[n,e])}function u(e){return function(n){const t=(0,o.U$)(),i=e((0,s.P)(n,t),t);return function(e,n){const t=(0,r.useRef)(n);(0,r.useEffect)((function(){n!==t.current&&null!=e.attributionControl&&(null!=t.current&&e.attributionControl.removeAttribution(t.current),null!=n&&e.attributionControl.addAttribution(n)),t.current=n}),[e,n])}(t.map,n.attribution),l(i.current,n.eventHandlers),c(i.current,t),i}}function d(e){return function(n){const t=(0,o.U$)(),i=e((0,s.P)(n,t),t);return l(i.current,n.eventHandlers),c(i.current,t),function(e,n){const t=(0,r.useRef)(void 0);(0,r.useEffect)((function(){if(n.pathOptions!==t.current){const r=n.pathOptions??{};e.instance.setStyle(r),t.current=r}}),[e,n])}(i.current,n),i}}function p(e,n){return i(u((0,a.K)(e,n)))}function g(e,n){return i(d((0,a.K)(e,n)))}function f(e,n){return function(e){function n(n,t){const{instance:o}=e(n).current;return(0,r.useImperativeHandle)(t,(()=>o)),null}return(0,r.forwardRef)(n)}(u((0,a.K)(e,n)))}},419:(e,n,t)=>{t.d(n,{W:()=>l});var r=t(772),o=t(228),i=t(43);function a(e,n){let{bounds:t,boundsOptions:a,center:l,children:s,className:c,id:u,placeholder:d,style:p,whenReady:g,zoom:f,...h}=e;const[m]=(0,i.useState)({className:c,id:u,style:p}),[b,y]=(0,i.useState)(null),x=(0,i.useRef)(void 0);(0,i.useImperativeHandle)(n,(()=>b?.map??null),[b]);const v=(0,i.useCallback)((e=>{if(null!==e&&!x.current){const n=new o.Map(e,h);x.current=n,null!=l&&null!=f?n.setView(l,f):null!=t&&n.fitBounds(t,a),null!=g&&n.whenReady(g),y((0,r.fB)(n))}}),[]);(0,i.useEffect)((()=>()=>{b?.map.remove()}),[b]);const w=b?i.createElement(r.dk,{value:b},s):d??null;return i.createElement("div",{...m,ref:v},w)}const l=(0,i.forwardRef)(a)},505:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var r=t(43),o=t(515),i=t(419),a=t(23),l=t(36),s=t(30),c=(t(433),t(228)),u=t.n(c),d=t(368),p=t(579);delete u().Icon.Default.prototype._getIconUrl,u().Icon.Default.mergeOptions({iconRetinaUrl:t(249),iconUrl:t(24),shadowUrl:t(71)});const g=e=>{let{onMapClick:n,isDrawingEnabled:t}=e;return(0,o.Po)({click:e=>{t&&n(e.latlng.lat,e.latlng.lng)}}),null},f=()=>{const{isDarkMode:e}=(0,d.D)(),[n,t]=(0,r.useState)([]),[o,c]=(0,r.useState)(!0),[u,f]=(0,r.useState)(null),[h,m]=(0,r.useState)(""),[b,y]=(0,r.useState)("waypoint");return(0,p.jsx)("div",{className:`min-h-screen ${e?"bg-gray-900":"bg-gray-100"} p-4`,children:(0,p.jsx)("div",{className:(e?"bg-gray-800":"bg-white")+" rounded-lg shadow p-6 max-w-7xl mx-auto",children:(0,p.jsxs)("div",{className:"mb-4 space-y-4",children:[(0,p.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,p.jsx)("button",{onClick:()=>c(!o),className:`px-4 py-2 rounded ${o?"bg-green-600 hover:bg-green-700":"bg-gray-600 hover:bg-gray-700"} text-white`,children:o?"Drawing Enabled":"Drawing Disabled"}),(0,p.jsx)("button",{onClick:()=>y("airport"===b?"waypoint":"airport"),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"airport"===b?"Airport Mode":"Waypoint Mode"}),(0,p.jsx)("button",{onClick:()=>{const e=(()=>{var e,t,r,o,i,a;return`<?xml version="1.0" encoding="UTF-8"?>\n<SimBase.Document Type="AceXML" version="1,0" id="flight-plan">\n  <Descr>AceXML FlightPlan</Descr>\n  <FlightPlan.FlightPlan>\n    <Title>Custom Flight Plan</Title>\n    <FPType>VFR</FPType>\n    <RouteType>Direct</RouteType>\n    <CruisingAlt>10000</CruisingAlt>\n    <DepartureID>${(null===(e=n[0])||void 0===e?void 0:e.name)||"START"}</DepartureID>\n    <DepartureLLA>${null===(t=n[0])||void 0===t?void 0:t.lat},${null===(r=n[0])||void 0===r?void 0:r.lng},0</DepartureLLA>\n    <DestinationID>${(null===(o=n[n.length-1])||void 0===o?void 0:o.name)||"END"}</DestinationID>\n    <DestinationLLA>${null===(i=n[n.length-1])||void 0===i?void 0:i.lat},${null===(a=n[n.length-1])||void 0===a?void 0:a.lng},0</DestinationLLA>\n    <AppVersion>\n      <AppVersionMajor>11</AppVersionMajor>\n      <AppVersionBuild>282174</AppVersionBuild>\n    </AppVersion>\n    <Waypoints>`+n.map(((e,n)=>`\n      <Waypoint>\n        <WorldPosition>${e.lat},${e.lng},0</WorldPosition>\n        <Ident>${e.name||`WP${n+1}`}</Ident>\n        <ATCWaypointType>${"airport"===e.type?"Airport":"User"}</ATCWaypointType>\n      </Waypoint>`)).join("")+"\n    </Waypoints>\n  </FlightPlan.FlightPlan>\n</SimBase.Document>"})(),t=new Blob([e],{type:"application/xml"}),r=URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download="flight_plan.pln",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)},disabled:n.length<2,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:bg-purple-300",children:"Export to MSFS"}),(0,p.jsx)("button",{onClick:()=>t([]),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Clear All"})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,p.jsx)("div",{className:"h-[400px] rounded border "+(e?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:(0,p.jsxs)(i.W,{style:{height:"100%",width:"100%"},center:[51.505,-.09],zoom:2,scrollWheelZoom:!0,children:[(0,p.jsx)(a.e,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:e?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,p.jsx)(g,{onMapClick:(e,r)=>{if(!o)return;const i={lat:e,lng:r,name:`WP${n.length+1}`,type:b};t([...n,i])},isDrawingEnabled:o}),n.map(((e,n)=>(0,p.jsx)(l.p,{position:[e.lat,e.lng],eventHandlers:{click:()=>f(e)}},n))),n.length>1&&(0,p.jsx)(s.R,{positions:n.map((e=>[e.lat,e.lng])),color:e?"#60A5FA":"#2563EB",weight:3})]})}),(0,p.jsxs)("div",{className:"p-4 rounded "+(e?"bg-gray-700":"bg-gray-50"),children:[(0,p.jsx)("h3",{className:"text-lg font-semibold mb-4 "+(e?"text-white":"text-gray-900"),children:"Waypoints"}),(0,p.jsx)("div",{className:"space-y-2",children:n.map(((r,o)=>(0,p.jsxs)("div",{className:"p-2 rounded flex items-center gap-2 "+(e?"bg-gray-600":"bg-white"),children:[(0,p.jsx)("span",{className:"font-mono "+(e?"text-blue-300":"text-blue-600"),children:r.name}),(0,p.jsxs)("span",{className:"text-sm "+(e?"text-gray-300":"text-gray-600"),children:["(",r.lat.toFixed(4),", ",r.lng.toFixed(4),")"]}),(0,p.jsx)("button",{onClick:()=>(e=>{t(n.filter(((n,t)=>t!==e)))})(o),className:"ml-auto text-red-500 hover:text-red-700",children:"\xd7"})]},o)))}),u&&(0,p.jsxs)("div",{className:"mt-4 p-4 rounded "+(e?"bg-gray-600":"bg-white"),children:[(0,p.jsx)("h4",{className:"font-semibold mb-2 "+(e?"text-white":"text-gray-900"),children:"Edit Waypoint"}),(0,p.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"Waypoint name",className:"w-full p-2 mb-2 rounded "+(e?"bg-gray-700 text-white border-gray-600":"bg-white text-gray-900")}),(0,p.jsx)("button",{onClick:()=>{var e,r;e=n.indexOf(u),r=h,t(n.map(((n,t)=>t===e?{...n,name:r}:n))),f(null)},className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Update Name"})]})]})]})]})})})}},515:(e,n,t)=>{t.d(n,{Po:()=>a,ko:()=>i});var r=t(772),o=t(43);function i(){return(0,r.U$)().map}function a(e){const n=i();return(0,o.useEffect)((function(){return n.on(e),function(){n.off(e)}}),[n,e]),n}},576:(e,n,t)=>{t.d(n,{K:()=>i,Q:()=>o});var r=t(43);function o(e,n,t){return Object.freeze({instance:e,context:n,container:t})}function i(e,n){return null==n?function(n,t){const o=(0,r.useRef)(void 0);return o.current||(o.current=e(n,t)),o}:function(t,o){const i=(0,r.useRef)(void 0);i.current||(i.current=e(t,o));const a=(0,r.useRef)(t),{instance:l}=i.current;return(0,r.useEffect)((function(){a.current!==t&&(n(l,t,a.current),a.current=t)}),[l,t,n]),i}}},772:(e,n,t)=>{t.d(n,{U$:()=>s,W4:()=>a,dk:()=>l,fB:()=>i});var r=t(43);const o=1;function i(e){return Object.freeze({__version:o,map:e})}function a(e,n){return Object.freeze({...e,...n})}const l=(0,r.createContext)(null);function s(){const e=(0,r.use)(l);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}},996:(e,n,t)=>{function r(e,n){const t=e.pane??n.pane;return t?{...e,pane:t}:e}t.d(n,{P:()=>r})}}]);
//# sourceMappingURL=498.c49ac65e.chunk.js.map