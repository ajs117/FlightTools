"use strict";(self.webpackChunkflighttools=self.webpackChunkflighttools||[]).push([[505],{23:(e,n,t)=>{t.d(n,{e:()=>i});var r=t(401),o=t(996),s=t(576);var a=t(228);const i=(0,r.X3)((function(e,n){let{url:t,...r}=e;const i=new a.TileLayer(t,(0,o.P)(r,n));return(0,s.Q)(i,n)}),(function(e,n,t){!function(e,n,t){const{opacity:r,zIndex:o}=n;null!=r&&r!==t.opacity&&e.setOpacity(r),null!=o&&o!==t.zIndex&&e.setZIndex(o)}(e,n,t);const{url:r}=n;null!=r&&r!==t.url&&e.setUrl(r)}))},30:(e,n,t)=>{t.d(n,{R:()=>i});var r=t(401),o=t(576),s=t(772),a=t(228);const i=(0,r.Lt)((function(e,n){let{positions:t,...r}=e;const i=new a.Polyline(t,r);return(0,o.Q)(i,(0,s.W4)(n,{overlayContainer:i}))}),(function(e,n,t){n.positions!==t.positions&&e.setLatLngs(n.positions)}))},36:(e,n,t)=>{t.d(n,{p:()=>i});var r=t(401),o=t(576),s=t(772),a=t(228);const i=(0,r.Nq)((function(e,n){let{position:t,...r}=e;const i=new a.Marker(t,r);return(0,o.Q)(i,(0,s.W4)(n,{overlayContainer:i}))}),(function(e,n,t){n.position!==t.position&&e.setLatLng(n.position),null!=n.icon&&n.icon!==t.icon&&e.setIcon(n.icon),null!=n.zIndexOffset&&n.zIndexOffset!==t.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),null!=n.opacity&&n.opacity!==t.opacity&&e.setOpacity(n.opacity),null!=e.dragging&&n.draggable!==t.draggable&&(!0===n.draggable?e.dragging.enable():e.dragging.disable())}))},401:(e,n,t)=>{t.d(n,{Nq:()=>f,wk:()=>g,Lt:()=>x,X3:()=>h});var r=t(43),o=t(950),s=t(772);function a(e){function n(n,t){const{instance:o,context:a}=e(n).current;(0,r.useImperativeHandle)(t,(()=>o));const{children:i}=n;return null==i?null:r.createElement(s.dk,{value:a},i)}return(0,r.forwardRef)(n)}function i(e,n){const t=(0,r.useRef)(n);(0,r.useEffect)((function(){n!==t.current&&null!=e.attributionControl&&(null!=t.current&&e.attributionControl.removeAttribution(t.current),null!=n&&e.attributionControl.addAttribution(n)),t.current=n}),[e,n])}function l(e,n){const t=(0,r.useRef)(void 0);(0,r.useEffect)((function(){return null!=n&&e.instance.on(n),t.current=n,function(){null!=t.current&&e.instance.off(t.current),t.current=null}}),[e,n])}var c=t(996);var u=t(576);function d(e,n){(0,r.useEffect)((function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){n.layerContainer?.removeLayer(e.instance),n.map.removeLayer(e.instance)}}),[n,e])}function p(e){return function(n){const t=(0,s.U$)(),r=e((0,c.P)(n,t),t);return i(t.map,n.attribution),l(r.current,n.eventHandlers),d(r.current,t),r}}function m(e){return function(n){const t=(0,s.U$)(),o=e((0,c.P)(n,t),t);return l(o.current,n.eventHandlers),d(o.current,t),function(e,n){const t=(0,r.useRef)(void 0);(0,r.useEffect)((function(){if(n.pathOptions!==t.current){const r=n.pathOptions??{};e.instance.setStyle(r),t.current=r}}),[e,n])}(o.current,n),o}}function f(e,n){return a(p((0,u.K)(e,n)))}function g(e,n){const t=function(e,n){return function(t,r){const o=(0,s.U$)(),a=e((0,c.P)(t,o),o);return i(o.map,t.attribution),l(a.current,t.eventHandlers),n(a.current,o,t,r),a}}((0,u.K)(e),n);return function(e){function n(n,t){const[s,a]=(0,r.useState)(!1),{instance:i}=e(n,a).current;(0,r.useImperativeHandle)(t,(()=>i)),(0,r.useEffect)((function(){s&&i.update()}),[i,s,n.children]);const l=i._contentNode;return l?(0,o.createPortal)(n.children,l):null}return(0,r.forwardRef)(n)}(t)}function x(e,n){return a(m((0,u.K)(e,n)))}function h(e,n){return function(e){function n(n,t){const{instance:o}=e(n).current;return(0,r.useImperativeHandle)(t,(()=>o)),null}return(0,r.forwardRef)(n)}(p((0,u.K)(e,n)))}},419:(e,n,t)=>{t.d(n,{W:()=>i});var r=t(772),o=t(228),s=t(43);function a(e,n){let{bounds:t,boundsOptions:a,center:i,children:l,className:c,id:u,placeholder:d,style:p,whenReady:m,zoom:f,...g}=e;const[x]=(0,s.useState)({className:c,id:u,style:p}),[h,b]=(0,s.useState)(null),y=(0,s.useRef)(void 0);(0,s.useImperativeHandle)(n,(()=>h?.map??null),[h]);const v=(0,s.useCallback)((e=>{if(null!==e&&!y.current){const n=new o.Map(e,g);y.current=n,null!=i&&null!=f?n.setView(i,f):null!=t&&n.fitBounds(t,a),null!=m&&n.whenReady(m),b((0,r.fB)(n))}}),[]);(0,s.useEffect)((()=>()=>{h?.map.remove()}),[h]);const w=h?s.createElement(r.dk,{value:h},l):d??null;return s.createElement("div",{...x,ref:v},w)}const i=(0,s.forwardRef)(a)},505:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var r=t(43),o=t(515),s=t(419),a=t(23),i=t(36),l=t(30),c=(t(433),t(228)),u=t.n(c),d=t(368),p=t(579);delete u().Icon.Default.prototype._getIconUrl,u().Icon.Default.mergeOptions({iconRetinaUrl:t(249),iconUrl:t(24),shadowUrl:t(71)});const m=e=>{let{onMapClick:n,isDrawingEnabled:t}=e;return(0,o.Po)({click:e=>{t&&n(e.latlng.lat,e.latlng.lng)}}),null},f=()=>{const{isDarkMode:e}=(0,d.D)(),[n,t]=(0,r.useState)([]),[o,c]=(0,r.useState)(!0),[u,f]=(0,r.useState)(null),[g,x]=(0,r.useState)(""),[h,b]=(0,r.useState)("waypoint");return(0,p.jsx)("div",{className:(e?"bg-gray-900":"bg-gray-100")+" p-2 sm:p-4",children:(0,p.jsx)("div",{className:(e?"bg-gray-800":"bg-white")+" rounded-lg shadow p-3 sm:p-6 max-w-7xl mx-auto",children:(0,p.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,p.jsxs)("div",{className:"flex flex-wrap gap-2 sm:gap-4",children:[(0,p.jsx)("button",{onClick:()=>c(!o),className:`px-2 py-1 sm:px-4 sm:py-2 text-xs sm:text-sm rounded ${o?"bg-green-600 hover:bg-green-700":"bg-gray-600 hover:bg-gray-700"} text-white`,children:o?"Drawing Enabled":"Drawing Disabled"}),(0,p.jsx)("button",{onClick:()=>b("airport"===h?"waypoint":"airport"),className:"px-2 py-1 sm:px-4 sm:py-2 text-xs sm:text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"airport"===h?"Airport Mode":"Waypoint Mode"}),(0,p.jsx)("button",{onClick:()=>{const e=(()=>{var e,t,r,o,s,a;return`<?xml version="1.0" encoding="UTF-8"?>\n<SimBase.Document Type="AceXML" version="1,0" id="flight-plan">\n  <Descr>AceXML FlightPlan</Descr>\n  <FlightPlan.FlightPlan>\n    <Title>Custom Flight Plan</Title>\n    <FPType>VFR</FPType>\n    <RouteType>Direct</RouteType>\n    <CruisingAlt>10000</CruisingAlt>\n    <DepartureID>${(null===(e=n[0])||void 0===e?void 0:e.name)||"START"}</DepartureID>\n    <DepartureLLA>${null===(t=n[0])||void 0===t?void 0:t.lat},${null===(r=n[0])||void 0===r?void 0:r.lng},0</DepartureLLA>\n    <DestinationID>${(null===(o=n[n.length-1])||void 0===o?void 0:o.name)||"END"}</DestinationID>\n    <DestinationLLA>${null===(s=n[n.length-1])||void 0===s?void 0:s.lat},${null===(a=n[n.length-1])||void 0===a?void 0:a.lng},0</DestinationLLA>\n    <AppVersion>\n      <AppVersionMajor>11</AppVersionMajor>\n      <AppVersionBuild>282174</AppVersionBuild>\n    </AppVersion>\n    <Waypoints>`+n.map(((e,n)=>`\n      <Waypoint>\n        <WorldPosition>${e.lat},${e.lng},0</WorldPosition>\n        <Ident>${e.name||`WP${n+1}`}</Ident>\n        <ATCWaypointType>${"airport"===e.type?"Airport":"User"}</ATCWaypointType>\n      </Waypoint>`)).join("")+"\n    </Waypoints>\n  </FlightPlan.FlightPlan>\n</SimBase.Document>"})(),t=new Blob([e],{type:"application/xml"}),r=URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download="flight_plan.pln",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)},disabled:n.length<2,className:"px-2 py-1 sm:px-4 sm:py-2 text-xs sm:text-sm bg-purple-600 text-white rounded hover:bg-purple-700 disabled:bg-purple-300",children:"Export to MSFS"}),(0,p.jsx)("button",{onClick:()=>t([]),className:"px-2 py-1 sm:px-4 sm:py-2 text-xs sm:text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Clear All"})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[(0,p.jsx)("div",{className:"h-[300px] sm:h-[400px] rounded border "+(e?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"),children:(0,p.jsxs)(s.W,{style:{height:"100%",width:"100%"},center:[51.505,-.09],zoom:2,scrollWheelZoom:!0,children:[(0,p.jsx)(a.e,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:e?"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png":"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,p.jsx)(m,{onMapClick:(e,r)=>{if(!o)return;const s={lat:e,lng:r,name:`WP${n.length+1}`,type:h};t([...n,s])},isDrawingEnabled:o}),n.map(((e,n)=>(0,p.jsx)(i.p,{position:[e.lat,e.lng],eventHandlers:{click:()=>f(e)}},n))),n.length>1&&(0,p.jsx)(l.R,{positions:n.map((e=>[e.lat,e.lng])),color:e?"#60A5FA":"#2563EB",weight:3})]})}),(0,p.jsxs)("div",{className:"p-3 sm:p-4 rounded "+(e?"bg-gray-700":"bg-gray-50"),children:[(0,p.jsx)("h3",{className:"text-base sm:text-lg font-semibold mb-2 sm:mb-4 "+(e?"text-white":"text-gray-900"),children:"Waypoints"}),(0,p.jsx)("div",{className:"space-y-1 sm:space-y-2 max-h-[250px] sm:max-h-[300px] overflow-y-auto text-sm",children:n.map(((r,o)=>(0,p.jsxs)("div",{className:"p-1 sm:p-2 rounded flex items-center gap-2 "+(e?"bg-gray-600":"bg-white"),children:[(0,p.jsx)("span",{className:"font-mono text-xs sm:text-sm "+(e?"text-blue-300":"text-blue-600"),children:r.name}),(0,p.jsxs)("span",{className:"text-xs sm:text-sm "+(e?"text-gray-300":"text-gray-600"),children:["(",r.lat.toFixed(4),", ",r.lng.toFixed(4),")"]}),(0,p.jsx)("button",{onClick:()=>(e=>{t(n.filter(((n,t)=>t!==e)))})(o),className:"ml-auto text-red-500 hover:text-red-700",children:"\xd7"})]},o)))}),u&&(0,p.jsxs)("div",{className:"mt-3 sm:mt-4 p-2 sm:p-4 rounded "+(e?"bg-gray-600":"bg-white"),children:[(0,p.jsx)("h4",{className:"text-sm sm:text-base font-semibold mb-1 sm:mb-2 "+(e?"text-white":"text-gray-900"),children:"Edit Waypoint"}),(0,p.jsx)("input",{type:"text",value:g,onChange:e=>x(e.target.value),placeholder:"Waypoint name",className:"w-full p-1 sm:p-2 mb-1 sm:mb-2 rounded text-sm "+(e?"bg-gray-700 text-white border-gray-600":"bg-white text-gray-900")}),(0,p.jsx)("button",{onClick:()=>{var e,r;e=n.indexOf(u),r=g,t(n.map(((n,t)=>t===e?{...n,name:r}:n))),f(null)},className:"w-full px-2 py-1 sm:px-4 sm:py-2 text-xs sm:text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Update Name"})]})]})]})]})})})}},515:(e,n,t)=>{t.d(n,{Po:()=>a,ko:()=>s});var r=t(772),o=t(43);function s(){return(0,r.U$)().map}function a(e){const n=s();return(0,o.useEffect)((function(){return n.on(e),function(){n.off(e)}}),[n,e]),n}},576:(e,n,t)=>{t.d(n,{K:()=>s,Q:()=>o});var r=t(43);function o(e,n,t){return Object.freeze({instance:e,context:n,container:t})}function s(e,n){return null==n?function(n,t){const o=(0,r.useRef)(void 0);return o.current||(o.current=e(n,t)),o}:function(t,o){const s=(0,r.useRef)(void 0);s.current||(s.current=e(t,o));const a=(0,r.useRef)(t),{instance:i}=s.current;return(0,r.useEffect)((function(){a.current!==t&&(n(i,t,a.current),a.current=t)}),[i,t,n]),s}}},772:(e,n,t)=>{t.d(n,{U$:()=>l,W4:()=>a,dk:()=>i,fB:()=>s});var r=t(43);const o=1;function s(e){return Object.freeze({__version:o,map:e})}function a(e,n){return Object.freeze({...e,...n})}const i=(0,r.createContext)(null);function l(){const e=(0,r.use)(i);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}},996:(e,n,t)=>{function r(e,n){const t=e.pane??n.pane;return t?{...e,pane:t}:e}t.d(n,{P:()=>r})}}]);
//# sourceMappingURL=505.a6204b45.chunk.js.map